<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firebase Email Auth Test</title>
</head>
<body>
 
<h2>Firebase Email Authentication</h2>
 
<input id="email" type="email" placeholder="Email"><br><br>
<input id="password" type="password" placeholder="Password"><br><br>
 
<button id="signup">Sign Up</button>
<button id="login">Login</button>
<button id="logout">Logout</button>
 
<p id="status"></p>
 <div id="appointment-section" style="display:none;">
  <h3>Book an Appointment</h3>
  <label for="date">Select Date:</label>
  <input type="date" id="date"><br><br>
  
  <label for="time">Select Time:</label>
  <input type="time" id="time"><br><br>
  
  <button id="book-appointment">Book Appointment</button>
  
  <p id="appointment-status"></p>
</div>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
 
  // ðŸ”´ Replace with YOUR Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCqc07_iFk565ATUXfH0WN9X592-BpN454",
    authDomain: "barber-shop-4c26f.firebaseapp.com",
    projectId: "barber-shop-4c26f",
    storageBucket: "barber-shop-4c26f.firebasestorage.app",
    messagingSenderId: "213114385226",
    appId: "1:213114385226:web:dcdf67972a683f2055c7b3"
  };
 
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
 
  const status = document.getElementById("status");
 
  // Auth state listener
  const appointmentSection = document.getElementById("appointment-section");
const appointmentStatus = document.getElementById("appointment-status");

onAuthStateChanged(auth, (user) => {
  if (user) {
    status.innerText = "Logged in as: " + user.email;
    appointmentSection.style.display = "block";  // Show appointment form when logged in
  } else {
    status.innerText = "Not logged in";
    appointmentSection.style.display = "none";  // Hide appointment form when logged out
    appointmentStatus.innerText = "";
  }
});

document.getElementById("book-appointment").onclick = () => {
  const date = document.getElementById("date").value;
  const time = document.getElementById("time").value;

  if (!date || !time) {
    appointmentStatus.innerText = "Please select both date and time.";
    return;
  }

  // For now, just show confirmation. In a real app, you'd save this to a database.
  appointmentStatus.innerText = `Appointment booked for ${date} at ${time}. Thank you!`;

  // Clear inputs
  document.getElementById("date").value = "";
  document.getElementById("time").value = "";
};
  onAuthStateChanged(auth, (user) => {
    if (user) {
      status.innerText = "Logged in as: " + user.email;
    } else {
      status.innerText = "Not logged in";
    }
  });
 
  document.getElementById("signup").onclick = async () => {
    try {
      await createUserWithEmailAndPassword(
        auth,
        email.value,
        password.value
      );
      alert("Signup successful");
    } catch (e) {
      alert(e.message);
    }
  };
 
  document.getElementById("login").onclick = async () => {
    try {
      await signInWithEmailAndPassword(
        auth,
        email.value,
        password.value
      );
      alert("Login successful");
    } catch (e) {
      alert(e.message);
    }
  };
 
  document.getElementById("logout").onclick = async () => {
    await signOut(auth);
    alert("Logged out");
  };
</script>
 
</body>
</html>
