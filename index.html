<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>Login</h2>
<input id="email" placeholder="Email"><br>
<input id="password" type="password" placeholder="Password"><br>
<button onclick="login()">Login</button>
<p id="msg"></p>

<!-- Firebase config -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey: "AIzaSyCqc07_iFk565ATUXfH0WN9X592-BpN454",
      authDomain: "barber-shop-4c26f.firebaseapp.com",
      projectId: "barber-shop-4c26f",
      storageBucket: "barber-shop-4c26f.firebasestorage.app",
      messagingSenderId: "213114385226",
      appId: "1:213114385226:web:dcdf67972a683f2055c7b3",
});

const auth = firebase.auth();
const db = firebase.firestore();

function login() {
 auth.signInWithEmailAndPassword(email.value, password.value)
 .then(res => {
   return db.collection("users").doc(res.user.uid).get();
 })
 .then(doc => {
   const role = doc.data().role;
   if(role==="admin") location.href="admin.html";
   if(role==="staff") location.href="staff.html";
   if(role==="customer") location.href="customer.html";
 })
 .catch(e => msg.innerText = e.message);
}
</script>

</body>
</html>
